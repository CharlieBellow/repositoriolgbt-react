<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <script type="module" src="./JS/Autor.js"></script>
  <script type="module" src="./JS/Texto.js"></script>
  <script type="module" src="./components/Main.js"></script>

  <script>

  class Autor {
        constructor(nome, sobrenome, formacao, publicacoes) {
          this.nome = nome;
          this.sobrenome = sobrenome;
          this.formacao = formacao;
          this.publicacoes = publicacoes;
        }
      }

      class Texto {
          constructor(titulo, autor, ano, tipo, categoria, link, citacao, avaliacao, descricao) {
            this.titulo = titulo;
            this.autor = autor;
            this.ano = ano;
            this.tipo = tipo;
            this.categoria = categoria;
            this.link = link;
            this.citacao = citacao;
            this.avaliacao = avaliacao;
            this.descricao = descricao;
          }
        }

    const scote = new Autor("Fausto", "Scote", "Ciências Sociais");
      const ceccarelli = new Autor("Paulo", "Ceccarelli", "Psicanalista");
      const moira = new Autor("Amara", "Moira", "filosofa");
      //const jesus = new Autor("Jaqueline", "Jesus", "filosofa");
      const vergueiro = new Autor("Viviane", "Vergueiro", "filosofa");
      const vieira = new Autor("Helena", "Vieira", "filosofa");

      const butler = new Autor("Judith", "Butler", "pós-estruturalista");

      const textoTransformandoAUniversidade = new Texto(
        "trans-formando a universidade: um estudo sobre o acesso e a permanência de pessoas trans no Ensino Superior",
        scote,
        2020,
        "artigo",
        "trans",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "esse é um texto que fala sobre as pessoas trans na universidade. esse é um texto que fala sobre as pessoas trans na universidade.esse é um texto que fala sobre as pessoas trans na universidade "
      );

      const textoSeraQueTemosDireito = new Texto(
        "será que temos mesmo o direito a universidade ? o desafio do acesso e permanência de pessoas transexuais no ensino superior",
        scote,
        2012,
        "artigo",
        "travesti",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "esse texto fala sobre o acesso e a permanência de pessoas trans na universidade.esse texto fala sobre o acesso e a permanência de pessoas trans na universidadeesse texto fala sobre o acesso e a permanência de pessoas trans na universidade"
      );

      const textoUmEstudoEtnografico = new Texto(
        "um estudo etnográfico da prostituição masculina e locais fechados",
        scote,
        2021,
        "dissertação",
        "gay",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "esse texto fala da prostituição masculina e seus desafios. esse texto fala da prostituição masculina e seus desafios"
      );

      const textoAInvencaoDaHomossexualidade = new Texto(
        "a invenção da homossexualidade",
        ceccarelli,
        2015,
        "escrito por LGBT",
        "gay",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "nesse texto Ceccarelli discorre sobre a história da homossexualidade. nesse texto ceccarelli discorre sobre a história da homossexualidade.nesse texto ceccarelli discorre sobre a história da homossexualidade."
      );

      const textoUmProblemaDeGenero = new Texto(
        "Um problema de gênero",
        butler,
        2021,
        "livro",
        "genero",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "um texto clássico de judith Butler. um texto clássico de judith Butler.um texto clássico de judith Butler.um texto clássico de judith Butler.um texto clássico de judith Butler.um texto clássico de judith Butler."
      );

      const textoAExperienciaDaCidade = new Texto(
        "A experiencia da cidade para pessoas lgbtqia",
        moira,
        2000,
        "materia",
        "LGBTQIA+",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "esse texto fala sobre a experiência da cidade para pessoas trans. esse texto fala sobre a experiência da cidade para pessoas trans"
      );

      const textoAProstituicaoComo = new Texto(
        "A prostituição como trincheira trans",
        moira,
        2001,
        "escritos por trans",
        "artigo",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "discorrendo sobre as dificuldades enfrentadas pelas pessoas trans, a autora destaca a prostituição como alternativa..."
      );

      const textoAutobiografiasTrans = new Texto(
        "Autobiografias trans",
        moira,
        2001,
        "materia",
        "trans",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "esse texto trans várias referências sobre pessoas trans, a exemplo de João Nery"
      );

      const textoTransSexualidade = new Texto(
        "trans Sexualidade",
        vergueiro,
        2015,
        "artigo",
        "trans",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "tudo que você precisa saber sobre transexualidade. tudo que você precisa saber sobre transexualidade. tudo que você precisa saber sobre transexualidade"
      );

      const textoTransfeminismo = new Texto(
        "transfeminismo",
        vieira,
        2014,
        "artigo",
        "lesbicas",
        "qualqer coisa",
        "qualqer coisa",
        "qualqer coisa",
        "transfeminismo, um tema necessário dentro dos estudos de gênero. transfeminismo, um tema necessário dentro dos estudos de gênero. transfeminismo, um tema necessário dentro dos estudos de gênero"
      );



      const textDataBase = [];

      textDataBase.push(
        textoTransformandoAUniversidade,
        textoSeraQueTemosDireito,
        textoUmEstudoEtnografico,
        textoAInvencaoDaHomossexualidade,
        textoUmProblemaDeGenero,
        textoAExperienciaDaCidade,
        textoAProstituicaoComo,
        textoAutobiografiasTrans,
        textoTransSexualidade,
        textoTransfeminismo
      );

//console.log(textDataBase);

      const initialCheckboxes = [
          { name: "lesbica", check: false},
          { name: "gay", check: false },
          { name: "bissexualidade", check: false },
          { name: "travestis", check: false },
          { name: "transexuais", check: false}, // true: pega o texto um estudo etnografico que é sobre gay
          { name: "trans", check: false }, 
          // true: pega o texto um estudo etnografico que é sobre gay. agora não pega mais, mas se deixar a checkbox como pessoas trans ele nao funciona, só funciona se colocar só trans
          { name: "pansexualidade", check: false },
          { name: "artigo", check: false },
          { name: "dissertação", check: false },
          { name: "escritos por trans", check: false },
          { name: "escrito por LGBT", check: false },
          { name: "assexualidade", check: false },
          { name: "gênero", check: true }, //true
          { name: "lgbt", check: false },
          // se coloco todos true, ele pula o texto 8 trans sexualidade, mas se marco o check trans ele pega essa texto
        ];

// revisar o estado
// testar a função em várias situações: todas marcadas, todas desmarcadas, etc.. e debugar a função




  //  0: Texto { titulo: 'Trans-formando a universidade: um estudo sobre o a…a permanência de pessoas Trans no Ensino Superior', categoria: 'trans"
//  1: Texto { titulo: 'SERÁ QUE TEMOS MESMO O DIREITO A UNIVERSIDADE ? O …ANÊNCIA DE PESSOAS TRANSEXUAIS NO ENSINO SUPERIOR', categoria: 'trans', … }
//  2: Texto { titulo: 'Um estudo Etnográfico da Prostituição Masculina e locais fechados', categoria: 'gay', … }
//  3: Texto { titulo: 'A invenção da Homossexualidade', categoria: 'gay', … }
//  4: Texto { titulo: 'Um problema de gênero', categoria: 'genero' }
//  5: Texto { titulo: 'A experiencia da cidade para pessoas LGBTQIA', categoria: 'LGBTQIA+', … }
//  6: Texto { titulo: 'A prostituição como trincheira trans', categoria: 'artigo', … }
//  7: Texto { titulo: 'Autobiografias trans', categoria: 'trans', … }
//  8: Texto { titulo: 'Trans Sexualidade', categoria: 'trans'}
//  9: Texto { titulo: 'Transfeminismo', categoria: 'lesbicas', … }

  
function filterByCheckbox(list, checkbox) {
      var haveSomethingToFilter = []
      for(let i = 0; i < checkbox.length; i++) {
        if(checkbox[i].check === false) {
          haveSomethingToFilter.push(false)
        }
        if (checkbox[i].check === true) {
          haveSomethingToFilter.push(true)
        }
      }
      var checkFilt = [...new Set(haveSomethingToFilter)]
      if (checkFilt.length == 1) {
        return list
      }
      if (checkFilt.length >= 2) {
        var filteredList = []
        for (let arrayList = 0; arrayList < list.length; arrayList++) {
          for (let arrayCheckBoxes = 0; arrayCheckBoxes < checkbox.length; arrayCheckBoxes++) {
            if(checkbox[arrayCheckBoxes].check === true &&
            (list[arrayList].titulo.includes(checkbox[arrayCheckBoxes].name) || list[arrayList].descricao.includes(checkbox[arrayCheckBoxes].name) || list[arrayList].categoria.includes(checkbox[arrayCheckBoxes].name) || list[arrayList].tipo.includes(checkbox[arrayCheckBoxes].name))
            ) {
              filteredList.push(list[arrayList]);
            }
          }
        }
        if(filteredList.length == 0) {
          return "nenhum texto foi encontrado";
        }
        var myArray = [...new Set(filteredList)]
        return myArray;
      }
}
  filterByCheckbox(textDataBase, initialCheckboxes)
  </script>
</body>
</html>